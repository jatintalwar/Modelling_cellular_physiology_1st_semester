% A script file for simulating I&F neuron.
% This is a first file for simulating just the subthreshold passive
% dynamics, with no external inputs.
% All voltage is in mV, all time is in millisecond.


V_reset = -65;   % defining the reset value of the membrane potential
E_L = -65;       % defining the reaversal potential
Tau_m = 30;      % defining the membrane time constant

t_max= 150;      % setting the maximum time for the simulation to run
dt=0.1;          % setting the time step of the simulation
t=0:0.1:t_max;   % creating the vector of time.
V_initial=[ -90 : 1: -56 ];  % creating a vector with the different initial conditions.

V=zeros(length(V_initial), length(t));
V(:,1)= V_initial' ; 

% The body of the simulation
% The loop for calculating the voltage
for i=1:length(t)-1

    V(:,i+1)=V(:,i)+(-V(:,i)+E_L).*dt/Tau_m;

end


% editing the plot
plot(t,V,'k-', 'linewidth', 1)
xlabel('Time [ms]')
ylabel('V [mV]')
title('Passive membrane potential dynamics')
axis([min(t)-5 max(t)+5 min(V_initial)-2 max(V_initial)+2])
box off

